# .codex/PR-18.md â€” Swarm Transport & Membership Skeleton (dwbase-swarm)

## Goal
Introduce a production-minded swarm skeleton: transport abstraction, peer identity, membership tracking,
and a basic gossip loop scaffold (no data replication yet).

## Deliverables
- Implement `crates/dwbase-swarm/` with:
  - `Transport` trait (send/recv envelopes)
  - `PeerId`, `PeerInfo` (node id, addr, trust score, worlds served)
  - `Membership` (peer table, last_seen, backoff)
  - `GossipLoop` skeleton (tick-based)
  - Wire format: `Envelope { kind, from, to, payload_bytes, sent_at }`
- Add a simple UDP or QUIC transport stub (choose one; keep minimal and safe).
- Add feature flags: `swarm` (off by default).

## Tests
- Unit tests for membership add/update/expire logic with fake clock.
- Envelope encode/decode roundtrip.

## Acceptance
- `cargo test -p dwbase-swarm` passes.
- No replication behavior yet; only membership + messaging skeleton.
