# .codex/PR-43.md — Observe Stream Hardening: Backpressure, Drop Policy, and Optional Durability

## Goal
Make observe streams predictable under load for Greentic flows: bounded memory, explicit drop behavior, and optional durability.

## Deliverables
- Add backpressure controls to observe streams:
  - per-handle queue capacity (default + configurable)
  - drop policy (drop-oldest vs drop-newest), surfaced as warnings/metrics
- Add per-handle stats:
  - queued count, dropped count, last_event_ms
- Optional durability mode:
  - persisted cursor into append-only log or per-world stream file
  - restart-safe `observe_start` for “catch-up since cursor”
- Emit metrics:
  - `dwbase.observe.dropped_total`
  - `dwbase.observe.queue_depth`

## Tests
- When queue is full, drop policy is enforced deterministically.
- Poll order remains stable (FIFO).

## Acceptance
- Observe does not grow memory unbounded.
- Operators can see when events are being dropped.

