# .codex/PR-01.md — DWBase Repository Bootstrap (Workspace + Conventions)

## Codex Execution Rules (read first)
- Complete as much as possible without asking for permission, unless destructive/risky.
- Keep diffs small and reviewable; do not implement core DWBase features yet.
- Prefer adding new files over refactoring non-existent code.
- After changes, run: `cargo fmt`, `cargo clippy -q` (if available), and `cargo test` (or `cargo test -q`) and fix issues.

## Goal
Turn this repo into a clean Rust workspace with baseline conventions so that all subsequent DWBase PRs can land cleanly.

PR-01 should establish:
- Workspace layout
- Minimal crate skeletons (empty but compiling)
- Formatting/linting/test defaults
- Documentation + contribution conventions

**No DWBase logic yet** (Atoms, engines, storage, etc. come later).

## Deliverables

### A) Workspace + crate skeletons
Create the workspace layout:

Cargo.toml
crates/
dwbase-core/
dwbase-engine/
dwbase-storage-sled/
dwbase-vector-hnsw/
dwbase-stream-local/
dwbase-security/
dwbase-embedder-dummy/
dwbase-node/
dwbase-wit-host/
dwbase-wit-guest/
dwbase-cli/
dwbase-metrics/
dwbase-swarm/

markdown
Copy code

Each crate must have:
- `Cargo.toml`
- `src/lib.rs` (or `src/main.rs` for bins)
- A short module-level doc comment describing intent.

Bin crates:
- `dwbase-node` (binary)
- `dwbase-cli` (binary)

Everything must compile with `cargo build`.

### B) Repo conventions
Add:
- `README.md` (minimal “what is DWBase + how to build”)
- `LICENSE` (choose Apache-2.0 or MIT; default to Apache-2.0 if not specified)
- `.gitignore` (Rust + common editor artifacts)
- `rustfmt.toml` (optional, only if you have strong preferences; otherwise omit)
- `deny.toml` is optional; skip unless you already use cargo-deny elsewhere

### C) CI (minimal)
Add a single GitHub Actions workflow:
- `.github/workflows/ci.yml`
- Runs on push/PR
- Steps:
  - checkout
  - install stable toolchain
  - `cargo fmt --check`
  - `cargo clippy -- -D warnings`
  - `cargo test`

Keep it minimal and fast.

### D) Baseline dependencies policy
In workspace root `Cargo.toml`:
- Use `[workspace.dependencies]` for shared deps (serde, thiserror, anyhow, tokio only when needed later)
- For PR-01 keep dependencies minimal—prefer none unless required to compile.

## Constraints
- Do NOT add real DWBase feature logic yet.
- Do NOT add WIT generation yet.
- Do NOT add sled/hnsw/tokio usage yet (stubs only).
- Keep PR-01 purely scaffolding + conventions.

## Acceptance Criteria
- `cargo build` succeeds at workspace root.
- `cargo test` succeeds (even if empty tests).
- `cargo fmt --check` passes.
- `cargo clippy -- -D warnings` passes.
- CI workflow runs the above.