# .codex/PR-03.md — Core Data Model (dwbase-core)

## Goal
Implement DWBase core immutable Atom data model and supporting types in `crates/dwbase-core`.

## Deliverables
In `dwbase-core`:
- Types:
  - `AtomId`, `WorldKey`, `WorkerKey` as newtypes around String (WASM-friendly)
  - `AtomKind` enum
  - `Timestamp` type (ISO-8601 UTC string wrapper; parsing helpers optional)
  - `Importance` newtype around f32 with clamp/validate 0..=1
  - `Atom` struct matching the spec fields (vector optional, payload JSON string, flags, labels, links)
- Serialization:
  - `serde::{Serialize,Deserialize}`
  - Support both `bincode` and `rmp-serde` behind feature flags, default to `bincode`
- Invariants:
  - Atoms are immutable by API: no setters; construction via `AtomBuilder` (optional) or `Atom::new(...)`
  - Update means new Atom referencing old via links — document this in code docs

## Tests
- Roundtrip serde for Atom (bincode + rmp feature)
- Importance validation (reject NaN, clamp or error — pick one and document)
- AtomKind serde stable names

## Acceptance Criteria
- `cargo test -p dwbase-core` passes.
- No IO, no async in dwbase-core.
