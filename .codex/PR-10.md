# .codex/PR-10.md â€” DWBaseEngine: remember/ask/observe/replay (end-to-end local)

## Goal
Implement the core DWBaseEngine logic wiring storage + vector + stream + security + embedder.

## Deliverables
In `dwbase-engine`:
- remember():
  - gatekeeper check
  - assign AtomId + created_at
  - compute source_trust
  - optional embed -> vector upsert
  - append to storage
  - add to reflex
  - publish to stream
- ask():
  - gatekeeper check
  - symbolic prefilter (reflex + optional storage scan fallback)
  - vector search
  - fetch atoms
  - rerank using trust/recency/flags
  - return Answer (summary optional stub)
- observe(): start/poll/stop delegated to StreamEngine
- replay(): delegated to StorageEngine

## Tests
- end-to-end test using:
  - SledStorage
  - LocalStreamEngine
  - DummyEmbedder
  - In-memory gatekeeper config
- verify that ask returns expected atoms ordered by ranking rules
