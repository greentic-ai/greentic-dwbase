# .codex/PR-34.md â€” NATS Swarm Messaging (Envelopes + Request/Reply)

## Goal
Add swarm message transport over NATS so nodes can exchange sync messages without direct HTTP connectivity.

## Deliverables
- Define swarm envelope subjects:
  - `dwbase.swarm.<node_id>.inbox` (direct)
  - `dwbase.swarm.broadcast` (optional)
- Implement request/reply patterns for:
  - `SummaryAdvert`
  - `BloomOffer`
  - `MissingRequest`
  - `AtomBatch`
- Add correlation IDs and timeouts.
- Implement backoff + rate limiting to prevent storms.

## Constraints
- Keep payloads binary (MessagePack/bincode) for speed.
- Must be compatible with WASM/WASI runtime limitations.

## Acceptance
- Two nodes can exchange a ping-like message and a SummaryAdvert over NATS reliably.
