# .codex/PR-31.md â€” component-dwbase Skeleton (WASM Component + Persistent FS)

## Goal
Create a production-minded **Greentic component** named `component-dwbase` that embeds the DWBase engine, persists to the local filesystem, and exposes a tool surface usable from flows/LLMs.

## Deliverables
- New crate: `crates/component-dwbase/` compiled to `wasm32-wasip2` (WASM component model).
- Component runtime model:
  - On first call (or init), open/create a DWBase data root directory under a configurable path (WASI fs).
  - Initialize DWBaseEngine with:
    - storage (local)
    - reflex index
    - vector index (optional, feature-gated)
    - stream engine (local)
    - security gatekeeper (config-driven)
- Config:
  - `DWBASE_DATA_DIR` (default: `./dwbase-data` under component sandbox)
  - `DWBASE_NODE_ID` (default: stable derived id)
  - `DWBASE_LOG_LEVEL` (default: info)

## Tool Surface (initial)
Expose operations (JSON in/out) via the Greentic component tool interface:
- `dwbase.remember`
- `dwbase.ask`
- `dwbase.replay`
- `dwbase.world.list`
(Observe and swarm come later.)

## Tests
- WASM build test (CI): builds component artifact.
- Basic integration test (host-side): calls remember + ask against component in a harness.

## Acceptance
- `cargo build --target wasm32-wasip2 -p component-dwbase` succeeds.
- Component writes durable state under `DWBASE_DATA_DIR`.
- End-to-end: remember then ask returns expected atoms.
