# .codex/PR-40.md — Production Ops: Health, Metrics, and Runbook for component-dwbase

## Goal
Make component-dwbase operable at scale: metrics, health signals, and clear operational guidance.

## Deliverables
- Metrics emitted (compatible with your Greentic telemetry stack):
  - remember latency
  - ask latency
  - index freshness
  - sync lag (swarm)
  - quarantine counts
  - disk usage
- Health signals:
  - “ready” once storage ok + indexes usable
  - “degraded” if disk near limit or index rebuild lagging
- Docs:
  - `docs/component-dwbase.md` runbook:
    - config knobs
    - tenant scoping rules
    - NATS discovery
    - troubleshooting (no peers, high lag, disk pressure)
    - upgrade notes

## Acceptance
- Operators can see whether memory is healthy and syncing.
- Runbook is complete and matches actual config/env vars.
