# .codex/PR-36.md — Production Security: Capabilities, Multi-tenant Scoping, and Policy Defaults

## Goal
Make component-dwbase safe to expose to LLMs in production Greentic flows.

## Deliverables
- Add config-driven capabilities by tenant/worker identity:
  - `DWBASE_TENANT_ID` or resolve from Greentic context
  - default world namespace rule:
    - worlds written by this component must be prefixed with `tenant:<id>/...` unless explicitly allowed
- Implement safe defaults:
  - deny cross-tenant worlds unless explicitly configured
  - enforce payload max size
  - enforce allowed labels/kinds
  - enforce importance cap
- Add Policy Atom support minimally:
  - replication allow/deny per world
  - retention minimum

## Tests
- Attempt to write to foreign world is denied.
- Oversize payload is rejected.

## Acceptance
- Out-of-the-box config is “safe by default” for enterprise use.
